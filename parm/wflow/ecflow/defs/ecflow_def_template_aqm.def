extrn /totality_limit:TOTALITY

suite {{ envir }}_{{ net }}
  inlimit /totality_limit:TOTALITY
  family {{ net }}
    edit PACKAGEHOME '{{ homedir  }}'
    edit NET '{{ net }}'
    edit model_ver '{{ model_ver }}'
    edit RUN '{{ run }}'
    edit PROJ '{{ net }}'
    edit PROJENVIR 'DEV'
    edit MACHINE_SITE 'development'
    edit ENVIR '{{ envir  }}'
    edit QUEUE '{{ queue_default }}'
    edit QUEUE_ARCH '{{ queue_hpss }}'
    edit OUTPUTDIR '{{ logbasedir }}'
    edit ECF_FILES '{{ homedir }}/ecf/scripts'
    family {{ model_ver }}
{% for icyc in cycles_1d %}
      family {{ icyc }}
        edit CYC '{{ icyc }}'
  {%- for itsk_grp in task_group.keys() %}
        family {{ itsk_grp }}
    {%- for itsk in task_group[itsk_grp] %}
      {%- if itsk == 'nexus_emission' %}
        {%- for inspt in nspt_list %}
          task {{ itsk }}_{{ inspt }}
          edit NSPT {{ inspt }}
          triger
        {%- endfor %}
      {%- elif itsk == 'run_ens_post' %}
        {%- if icyc == '06' or icyc == '12' %}
          {%- for ifct in fcst_len_max_list %}
          task {{ itsk }}_f{{ ifct }}
          triger
          {%- endfor %}
        {%- else %}
          {%- for ifct in fcst_len_min_list %}
          task {{ itsk }}_f{{ ifct }}
          triger
          {%- endfor %}
        {%- endif %}
      {%- else %}
          task {{ itsk }}
          triger
      {%- endif %}
    {%- endfor %}
        endfamily # task_group
  {%- endfor %}
      endfamily # cyc=00
{%- endfor %}
    endfamily # model_ver
  endfamily  # NET
endsuite
